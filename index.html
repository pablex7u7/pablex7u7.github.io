<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explorador Interactivo del Marco MAAF</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F5F5F4;
            color: #292524;
        }
        .nav-button {
            transition: all 0.3s ease;
        }
        .nav-button.active {
            background-color: #0D9488;
            color: #F5F5F4;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .principle-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            cursor: pointer;
        }
        .principle-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .artefact-tab {
            @apply border-b-2 border-transparent px-4 py-2 text-sm md:text-base font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300 transition-colors duration-200;
        }
        .artefact-tab.active {
            @apply border-teal-600 text-teal-600;
        }
        .artefact-content {
            display: none;
        }
        .artefact-content.active {
            display: block;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white shadow-md sticky top-0 z-10">
        <nav class="container mx-auto px-6 py-4 flex justify-center items-center">
            <div class="flex flex-wrap justify-center space-x-2 md:space-x-4">
                <button data-target="intro" class="nav-button active text-sm md:text-base font-medium px-3 py-2 rounded-lg">Introducci√≥n</button>
                <button data-target="principles" class="nav-button text-sm md:text-base font-medium px-3 py-2 rounded-lg">Principios</button>
                <button data-target="pilot" class="nav-button text-sm md:text-base font-medium px-3 py-2 rounded-lg">Caso Piloto</button>
                <button data-target="artefacts" class="nav-button text-sm md:text-base font-medium px-3 py-2 rounded-lg">Artefactos</button>
                <button data-target="methodology" class="nav-button text-sm md:text-base font-medium px-3 py-2 rounded-lg">Metodolog√≠a</button>
                <button data-target="data-viz" class="nav-button text-sm md:text-base font-medium px-3 py-2 rounded-lg">Visualizaci√≥n de Datos</button>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-8">

        <section id="intro" class="content-section active">
            <div class="text-center mb-12">
                <h1 class="text-3xl md:text-5xl font-bold text-gray-800 mb-4">Hacia un Estado Auditable</h1>
                <p class="text-lg md:text-xl text-gray-600 max-w-3xl mx-auto">Un explorador interactivo del Marco de Rendici√≥n de Cuentas Algor√≠tmica (MAAF) para el sector p√∫blico en M√©xico.</p>
            </div>

            <div class="bg-white p-8 rounded-xl shadow-lg">
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="border-r-0 md:border-r md:pr-8 border-gray-200">
                        <h2 class="text-2xl font-bold text-teal-700 mb-4">El Problema</h2>
                        <p class="text-gray-700 leading-relaxed mb-4">El uso creciente de sistemas algor√≠tmicos en decisiones administrativas, que a menudo carecen de transparencia y controles adecuados, genera un grave riesgo de opacidad y sesgo.</p>
                        <h3 class="font-semibold text-gray-800 mt-6 mb-2">Preguntas de Investigaci√≥n Clave:</h3>
                        <ul class="list-disc list-inside text-gray-600 space-y-2">
                            <li>¬øQu√© componentes m√≠nimos hacen ‚Äúauditable‚Äù un sistema algor√≠tmico p√∫blico?</li>
                            <li>¬øC√≥mo institucionalizar estos componentes en plazos razonables y con bajo costo de cumplimiento?</li>
                        </ul>
                    </div>
                    <div>
                        <h2 class="text-2xl font-bold text-teal-700 mb-4">Las Contribuciones</h2>
                        <ul class="list-disc list-inside text-gray-700 leading-relaxed space-y-2">
                            <li>Un marco operativo de rendici√≥n de cuentas (MAAF) implementable en el sector p√∫blico.</li>
                            <li>Artefactos listos para la adopci√≥n: plantillas de documentaci√≥n, listas de verificaci√≥n, matrices de responsabilidades y m√°s.</li>
                            <li>Un plan de pilotos para validar la utilidad del marco en procesos de alto impacto.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section id="principles" class="content-section">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-800">Principios Gu√≠a del Marco MAAF</h2>
                <p class="mt-4 text-lg text-gray-600">Estos siete principios son el pilar del marco, asegurando un desarrollo y despliegue √©tico y responsable de los sistemas algor√≠tmicos.</p>
            </div>
            <div id="principles-grid" class="grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            </div>
        </section>

        <section id="pilot" class="content-section">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-800">El Marco en Acci√≥n: Caso Piloto</h2>
                <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">Para validar el marco, se propone un piloto: un modelo para predecir la deserci√≥n en el programa "J√≥venes Construyendo el Futuro".</p>
            </div>
            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg">
                <h3 class="text-2xl font-bold text-center text-teal-700 mb-6">Perfil Educativo de Participantes</h3>
                <p class="text-center text-gray-600 mb-8">El gr√°fico a continuaci√≥n muestra la distribuci√≥n de los participantes del programa por su √∫ltimo nivel de estudios, basado en los datos reales del CSV.</p>
                <div class="chart-container">
                    <canvas id="participantsChart"></canvas>
                </div>
            </div>
            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg mt-8">
                <h3 class="text-2xl font-bold text-center text-teal-700 mb-6">Aplicabilidad en otros procesos</h3>
                <p class="text-center text-gray-600 mb-4">El marco MAAF no se limita a un solo caso. Haz clic en los ejemplos para entender su potencial.</p>
                <div id="applicability-cards" class="grid md:grid-cols-3 gap-4">
                </div>
            </div>
        </section>

        <section id="artefacts" class="content-section">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-800">Artefactos de Gobernanza</h2>
                <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">Estos son los instrumentos pr√°cticos que el marco MAAF propone para implementar la rendici√≥n de cuentas.</p>
            </div>

            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg">
                <div class="border-b border-gray-200 mb-6 overflow-x-auto">
                    <nav class="flex space-x-4">
                        <button class="artefact-tab active" data-target="model-card">Model Card</button>
                        <button class="artefact-tab" data-target="datasheet">Datasheet</button>
                        <button class="artefact-tab" data-target="raci">Matriz RACI</button>
                        <button class="artefact-tab" data-target="risk">R√∫brica de Riesgo</button>
                        <button class="artefact-tab" data-target="bitacora">Bit√°cora de Decisiones</button>
                        <button class="artefact-tab" data-target="verificacion">Listas de Verificaci√≥n</button>
                    </nav>
                </div>

                <div id="model-card" class="artefact-content active">
                    <h3 class="text-xl font-bold text-teal-700 mb-4">Model Card: Ficha T√©cnica del Algoritmo</h3>
                    <p class="text-gray-600 mb-6">Este documento resume de manera concisa el prop√≥sito, desempe√±o y limitaciones del modelo algor√≠tmico para asegurar su transparencia.</p>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <tbody class="bg-white divide-y divide-gray-200">
                                <tr class="bg-gray-50"><td class="px-6 py-4 font-bold text-gray-700" colspan="2">Identificaci√≥n del Modelo</td></tr>
                                <tr><td class="px-6 py-4 font-medium text-gray-500">Nombre</td><td class="px-6 py-4 text-gray-800">Algoritmo Predictivo de Deserci√≥n del Programa "J√≥venes Construyendo el Futuro"</td></tr>
                                <tr><td class="px-6 py-4 font-medium text-gray-500">Versi√≥n</td><td class="px-6 py-4 text-gray-800">1.0</td></tr>
                                <tr class="bg-gray-50"><td class="px-6 py-4 font-bold text-gray-700" colspan="2">Prop√≥sito y Uso Previsto</td></tr>
                                <tr><td class="px-6 py-4 font-medium text-gray-500">Casos de Uso</td><td class="px-6 py-4 text-gray-800">Identificar participantes con alta probabilidad de deserci√≥n.</td></tr>
                                <tr><td class="px-6 py-4 font-medium text-gray-500">Usuarios Objetivo</td><td class="px-6 py-4 text-gray-800">Gestores del programa, consejeros, personal de campo.</td></tr>
                                <tr><td class="px-6 py-4 font-medium text-gray-500">Uso fuera de √°mbito</td><td class="px-6 py-4 text-gray-800">No se usar√° para expulsi√≥n autom√°tica ni para determinar la elegibilidad.</td></tr>
                                <tr class="bg-gray-50"><td class="px-6 py-4 font-bold text-gray-700" colspan="2">Datos de Entrenamiento</td></tr>
                                <tr><td class="px-6 py-4 font-medium text-gray-500">Variables Clave</td><td class="px-6 py-4 text-gray-800">`edad`, `nivel_educativo`, `genero`, `tipo_de_capacitacion`, `ubicacion_geografica`.</td></tr>
                                <tr class="bg-gray-50"><td class="px-6 py-4 font-bold text-gray-700" colspan="2">Evaluaci√≥n de Sesgos</td></tr>
                                <tr><td class="px-6 py-4 font-medium text-gray-500">Sesgos identificados</td><td class="px-6 py-4 text-gray-800">Posibles sesgos por regi√≥n geogr√°fica, g√©nero, o nivel socioecon√≥mico.</td></tr>
                                <tr class="bg-gray-50"><td class="px-6 py-4 font-bold text-gray-700" colspan="2">Mecanismos de Supervisi√≥n</td></tr>
                                <tr><td class="px-6 py-4 font-medium text-gray-500">Supervisi√≥n Humana</td><td class="px-6 py-4 text-gray-800">El modelo solo genera una recomendaci√≥n; la decisi√≥n es tomada por un gestor.</td></tr>
                                <tr><td class="px-6 py-4 font-medium text-gray-500">Mecanismo de Reparaci√≥n</td><td class="px-6 py-4 text-gray-800">Proceso para que los participantes soliciten una revisi√≥n.</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div id="datasheet" class="artefact-content">
                    <h3 class="text-xl font-bold text-teal-700 mb-4">Datasheet: Ficha T√©cnica de los Datos</h3>
                    <p class="text-gray-600 mb-6">Es crucial documentar el origen, composici√≥n y limitaciones del conjunto de datos para garantizar la trazabilidad y la equidad.</p>
                    <ul class="space-y-4">
                        <li class="p-4 bg-gray-50 rounded-lg"><strong>Identificaci√≥n del Dataset:</strong> Se registrar√° el nombre, la fuente original y la fecha de creaci√≥n del conjunto de datos.</li>
                        <li class="p-4 bg-gray-50 rounded-lg"><strong>Composici√≥n:</strong> Se documentar√° el n√∫mero de registros y variables, indicando si son categ√≥ricas o num√©ricas.</li>
                        <li class="p-4 bg-gray-50 rounded-lg"><strong>M√©todos de Colecci√≥n:</strong> Se detallar√° el origen de los datos (ej. registros de la plataforma oficial).</li>
                        <li class="p-4 bg-gray-50 rounded-lg"><strong>Preprocesamiento:</strong> Se describir√°n los pasos de limpieza de datos y el manejo de valores faltantes.</li>
                        <li class="p-4 bg-gray-50 rounded-lg"><strong>Etiquetado:</strong> Se definir√° c√≥mo se etiquet√≥ la variable objetivo (`deserci√≥n`).</li>
                        <li class="p-4 bg-gray-50 rounded-lg"><strong>Limitaciones y Sesgos:</strong> Se analizar√° la representatividad de la muestra y se identificar√°n los sesgos inherentes a los datos.</li>
                    </ul>
                </div>

                <div id="raci" class="artefact-content">
                    <h3 class="text-xl font-bold text-teal-700 mb-4">Matriz RACI: Asignaci√≥n de Responsabilidades</h3>
                    <p class="text-gray-600 mb-6">Esta matriz define claramente qui√©n es el Responsable, el Aprobador (Accountable), el Consultado y el Informado para cada tarea clave del ciclo de vida del algoritmo.</p>
                    <div class="overflow-x-auto">
                        <table class="min-w-full border">
                            <thead class="bg-gray-100">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Tarea</th>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Responsable (R)</th>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Aprobador (A)</th>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Consultado (C)</th>
                                    <th class="px-6 py-3 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Informado (I)</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <tr>
                                    <td class="px-6 py-4 font-semibold">Evaluaci√≥n de Impacto (AIA)</td>
                                    <td class="px-6 py-4">Analista de Datos</td>
                                    <td class="px-6 py-4">Comit√© de Supervisi√≥n</td>
                                    <td class="px-6 py-4">Expertos en Pol√≠ticas P√∫blicas</td>
                                    <td class="px-6 py-4">Equipo Directivo</td>
                                </tr>
                                <tr class="bg-gray-50">
                                    <td class="px-6 py-4 font-semibold">Monitoreo del Sistema</td>
                                    <td class="px-6 py-4">Cient√≠fico de Datos</td>
                                    <td class="px-6 py-4">Comit√© de Supervisi√≥n</td>
                                    <td class="px-6 py-4">Equipo de Soporte T√©cnico</td>
                                    <td class="px-6 py-4">Equipo Directivo</td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-4 font-semibold">Gesti√≥n de Incidentes</td>
                                    <td class="px-6 py-4">Gestor de Programa</td>
                                    <td class="px-6 py-4">Comit√© de Supervisi√≥n</td>
                                    <td class="px-6 py-4">Representante del Participante</td>
                                    <td class="px-6 py-4">Equipo de Desarrollo</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div id="risk" class="artefact-content">
                    <h3 class="text-xl font-bold text-teal-700 mb-4">R√∫brica de Riesgo</h3>
                    <p class="text-gray-600 mb-6">La clasificaci√≥n de riesgo de un sistema algor√≠tmico determina el nivel de escrutinio y gobernanza requerido.</p>
                    <div class="space-y-4 max-w-md mx-auto">
                        <div class="flex items-center justify-between bg-gray-100 p-4 rounded-lg">
                            <span class="font-semibold text-lg text-gray-800">Eje de Impacto</span>
                            <span class="px-3 py-1 text-sm font-bold text-white bg-red-500 rounded-full">Alto</span>
                        </div>
                        <p class="text-sm text-gray-600 px-4">El modelo tiene un impacto directo en las oportunidades de los participantes del programa.</p>
                        <div class="flex items-center justify-between bg-gray-100 p-4 rounded-lg">
                            <span class="font-semibold text-lg text-gray-800">Eje de Opacidad</span>
                            <span class="px-3 py-1 text-sm font-bold text-white bg-yellow-500 rounded-full">Moderado</span>
                        </div>
                        <p class="text-sm text-gray-600 px-4">Es un modelo de aprendizaje autom√°tico, por lo que sus decisiones no son trivialmente interpretables.</p>
                        <div class="mt-6 border-t pt-4">
                            <div class="flex items-center justify-between p-4 rounded-lg bg-teal-50 border border-teal-200">
                                <span class="font-semibold text-lg text-teal-800">Clasificaci√≥n del Sistema</span>
                                <span class="font-bold text-xl text-teal-800">Riesgo Alto</span>
                            </div>
                            <p class="text-sm text-gray-600 px-4 mt-2">Esta clasificaci√≥n justifica la aplicaci√≥n de todos los siete ejes del marco MAAF para una rendici√≥n de cuentas robusta.</p>
                        </div>
                    </div>
                </div>

                <div id="bitacora" class="artefact-content">
                    <h3 class="text-xl font-bold text-teal-700 mb-4">Bit√°cora de Decisiones</h3>
                    <p class="text-gray-600 mb-6">La bit√°cora es un registro cronol√≥gico de las decisiones, suposiciones y cambios significativos en el sistema, lo que permite la trazabilidad y la rendici√≥n de cuentas post-despliegue.</p>
                    <div class="space-y-4">
                        <div class="p-4 bg-gray-50 rounded-lg shadow-sm">
                            <h4 class="font-semibold text-gray-800">Registro de Incidentes</h4>
                            <p class="text-gray-600 text-sm mt-2">Se registran fallos en la predicci√≥n, clasificaciones err√≥neas y quejas de los participantes.</p>
                        </div>
                        <div class="p-4 bg-gray-50 rounded-lg shadow-sm">
                            <h4 class="font-semibold text-gray-800">Justificaci√≥n de Cambios</h4>
                            <p class="text-gray-600 text-sm mt-2">Se documenta la raz√≥n para cada actualizaci√≥n o re-entrenamiento del modelo.</p>
                        </div>
                        <div class="p-4 bg-gray-50 rounded-lg shadow-sm">
                            <h4 class="font-semibold text-gray-800">Responsables</h4>
                            <p class="text-gray-600 text-sm mt-2">Se asocia a cada entrada el nombre del responsable y la fecha.</p>
                        </div>
                    </div>
                </div>

                <div id="verificacion" class="artefact-content">
                    <h3 class="text-xl font-bold text-teal-700 mb-4">Listas de Verificaci√≥n Pre y Post-Despliegue</h3>
                    <p class="text-gray-600 mb-6">Estas listas aseguran que todos los criterios de gobernanza se cumplan antes de la puesta en marcha y durante el monitoreo continuo del sistema.</p>
                    <div class="space-y-6">
                        <div>
                            <h4 class="text-lg font-bold text-gray-700 mb-2">Pre-Despliegue</h4>
                            <ul class="list-disc list-inside text-gray-600 space-y-1">
                                <li>¬øSe ha completado la Evaluaci√≥n de Impacto Algor√≠tmico (AIA)?</li>
                                <li>¬øSe ha llenado el Datasheet y el Model Card?</li>
                                <li>¬øSe han definido los mecanismos de supervisi√≥n humana?</li>
                                <li>¬øHay un plan de reparaci√≥n de errores?</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="text-lg font-bold text-gray-700 mb-2">Post-Despliegue</h4>
                            <ul class="list-disc list-inside text-gray-600 space-y-1">
                                <li>¬øSe est√°n registrando incidentes en la bit√°cora?</li>
                                <li>¬øSe est√° monitoreando la equidad y el sesgo?</li>
                                <li>¬øEl rendimiento del modelo se mantiene dentro de los par√°metros esperados?</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="methodology" class="content-section">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-800">Metodolog√≠a de Dise√±o</h2>
                <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">El desarrollo del marco MAAF sigue la metodolog√≠a de la "ciencia del dise√±o" (design science), un enfoque que se centra en la construcci√≥n y evaluaci√≥n de artefactos de investigaci√≥n para resolver problemas pr√°cticos.</p>
            </div>
            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg flex flex-col md:flex-row items-center md:space-x-8">
                <div class="md:w-1/2">
                    <h3 class="text-xl font-bold text-teal-700 mb-4">1. Dise√±o del Artefacto</h3>
                    <p class="text-gray-700 leading-relaxed mb-4">La primera etapa consisti√≥ en la conceptualizaci√≥n y construcci√≥n de un "artefacto" que fuera √∫til para la rendici√≥n de cuentas. En este caso, el artefacto es el propio marco MAAF, compuesto por principios, procesos y herramientas documentadas.</p>
                <p class="text-gray-700 leading-relaxed">El objetivo era crear algo que no solo fuera te√≥ricamente s√≥lido, sino tambi√©n **pr√°cticamente implementable** en un entorno del sector p√∫blico. Se hizo especial √©nfasis en que fuera compatible con el marco regulatorio mexicano y estuviera orientado a los derechos humanos.</p>
                </div>
                <div class="md:w-1/2 mt-6 md:mt-0">
                    <h3 class="text-xl font-bold text-teal-700 mb-4">2. Validaci√≥n de Utilidad</h3>
                    <p class="text-gray-700 leading-relaxed mb-4">La segunda etapa se centra en demostrar que el artefacto dise√±ado es √∫til para su prop√≥sito. Esto se logra a trav√©s de un proyecto piloto, como el del programa "J√≥venes Construyendo el Futuro".</p>
                    <p class="text-gray-700 leading-relaxed">La validaci√≥n de la utilidad se medir√° a trav√©s de m√©tricas de √©xito (ej. reducci√≥n de sesgos, mejora en la trazabilidad) y del registro de la experiencia de los usuarios finales (ej. gestores del programa), asegurando que el marco resuelve el problema de la opacidad algor√≠tmica.</p>
                </div>
            </div>
        </section>

        <section id="data-viz" class="content-section">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-800">Visualizaci√≥n de Datos del Programa</h2>
                <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">Aqu√≠ puedes explorar la distribuci√≥n de los participantes del programa "J√≥venes Construyendo el Futuro" por estatus, edad y sexo.</p>
            </div>
            
            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg mb-8">
                <h3 class="text-2xl font-bold text-center text-teal-700 mb-6">Estatus de Participantes</h3>
                <p class="text-center text-gray-600 mb-8">Esta gr√°fica muestra el n√∫mero de participantes activos e inactivos en el programa.</p>
                <div class="chart-container">
                    <canvas id="statusChart"></canvas>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-8 mt-8">
                <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-bold text-center text-teal-700 mb-6">Distribuci√≥n por Edad</h3>
                    <div class="chart-container">
                        <canvas id="ageChart"></canvas>
                    </div>
                </div>
                <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-bold text-center text-teal-700 mb-6">Distribuci√≥n por Sexo</h3>
                    <div class="chart-container">
                        <canvas id="sexChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-white mt-12 py-6 border-t">
        <div class="container mx-auto text-center text-gray-500">
            <p>&copy; 2025 Explorador del Marco MAAF. Un proyecto de visualizaci√≥n de gobernanza algor√≠tmica.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const navButtons = document.querySelectorAll('.nav-button');
            const contentSections = document.querySelectorAll('.content-section');
            const principlesData = [
                { title: 'Legalidad', icon: '‚öñÔ∏è', text: 'Los sistemas deben operar bajo el marco legal existente y respetar los derechos humanos.' },
                { title: 'Necesidad y Proporcionalidad', icon: 'üéØ', text: 'El uso del algoritmo debe ser necesario para lograr un objetivo leg√≠timo y proporcional al impacto que genera.' },
                { title: 'No Discriminaci√≥n', icon: 'ü§ù', text: 'El dise√±o y los datos deben prevenir activamente cualquier forma de sesgo o discriminaci√≥n injusta contra individuos o grupos.' },
                { title: 'Explicabilidad', icon: 'üí°', text: 'El sistema debe ser capaz de explicar, en t√©rminos comprensibles, c√≥mo lleg√≥ a una decisi√≥n particular.' },
                { title: 'Trazabilidad', icon: 'üîç', text: 'Las decisiones, los datos utilizados y los cambios en el modelo deben ser auditables y rastreables.' },
                { title: 'Supervisi√≥n Humana', icon: 'üë§', text: 'Debe existir siempre un mecanismo de supervisi√≥n humana significativa (human-in/on-the-loop).' },
                { title: 'Seguridad y Mejora Continua', icon: 'üîÑ', text: 'El sistema debe ser seguro, robusto y estar sujeto a un proceso de revisi√≥n y mejora constante.' }
            ];

            const principlesGrid = document.getElementById('principles-grid');
            principlesData.forEach(p => {
                const card = document.createElement('div');
                card.className = 'principle-card bg-white p-6 rounded-xl shadow-lg';
                card.innerHTML = `
                    <div class="text-3xl mb-4">${p.icon}</div>
                    <h3 class="text-xl font-bold text-gray-800 mb-2">${p.title}</h3>
                    <p class="text-gray-600">${p.text}</p>
                `;
                principlesGrid.appendChild(card);
            });

            const applicabilityData = [
                { title: 'Padr√≥n de Beneficiarios', text: 'Optimizar la identificaci√≥n de beneficiarios elegibles, reduciendo errores y sesgos en la asignaci√≥n de recursos.' },
                { title: 'Priorizaci√≥n de Tr√°mites', text: 'Utilizar el marco para clasificar la urgencia de tr√°mites administrativos, asegurando un trato equitativo y eficiente.' },
                { title: 'Fiscalizaci√≥n No Intrusiva', text: 'Gobernar los algoritmos que identifican patrones de riesgo fiscal, manteniendo la trazabilidad y la justificaci√≥n de las decisiones.' }
            ];

            const applicabilityCards = document.getElementById('applicability-cards');
            applicabilityData.forEach(item => {
                const card = document.createElement('div');
                card.className = 'bg-white p-4 rounded-xl shadow-md cursor-pointer hover:bg-gray-50 transition';
                card.innerHTML = `<h4 class="font-bold text-gray-800">${item.title}</h4><p class="text-sm text-gray-600 mt-1">${item.text}</p>`;
                applicabilityCards.appendChild(card);
            });

            navButtons.forEach(button => {
                button.addEventListener('click', () => {
                    navButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    const targetId = button.getAttribute('data-target');
                    contentSections.forEach(section => {
                        if (section.id === targetId) {
                            section.classList.add('active');
                            if (targetId === 'data-viz') {
                                loadAndDrawAllDataViz();
                            } else if (targetId === 'pilot') {
                                drawParticipantsChart(); // Cargar solo la gr√°fica de nivel educativo para el piloto
                            }
                        } else {
                            section.classList.remove('active');
                        }
                    });
                });
            });

            const artefactTabs = document.querySelectorAll('.artefact-tab');
            const artefactContents = document.querySelectorAll('.artefact-content');
            artefactTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    artefactTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    const targetId = tab.getAttribute('data-target');
                    artefactContents.forEach(content => {
                        if (content.id === targetId) {
                            content.classList.add('active');
                        } else {
                            content.classList.remove('active');
                        }
                    });
                });
            });

            async function loadAndDrawAllDataViz() {
                try {
                    const csvData = await d3.csv('./CIJ_1_JovenesConstruyendo_2021_2025T1.csv');
                    
                    // Nuevo gr√°fico de estatus de participantes
                    drawStatusChart(csvData);

                    // Gr√°ficos existentes modificados para usar datos del CSV
                    drawAgeChart(csvData);
                    drawSexChart(csvData);

                } catch (error) {
                    console.error("Error loading CSV data:", error);
                    const vizContainer = document.getElementById('statusChart').parentElement;
                    vizContainer.innerHTML = '<div class="text-center text-red-500 font-semibold p-4">Error al cargar datos del CSV. Aseg√∫rate de que "CIJ_1_JovenesConstruyendo_2021_2025T1.csv" est√° en la carpeta y tiene las columnas "fecha_inicio" y "fecha_termino".</div>';

                    const ageChartContainer = document.getElementById('ageChart').parentElement;
                    ageChartContainer.innerHTML = '<div class="text-center text-red-500 font-semibold p-4">Error al cargar datos.</div>';
                    
                    const sexChartContainer = document.getElementById('sexChart').parentElement;
                    sexChartContainer.innerHTML = '<div class="text-center text-red-500 font-semibold p-4">Error al cargar datos.</div>';
                }
            }

            // Gr√°fico de barras del caso piloto (modificado para usar CSV)
            async function drawParticipantsChart() {
                try {
                    const csvData = await d3.csv('./CIJ_1_JovenesConstruyendo_2021_2025T1.csv');
                    const levelCounts = d3.rollup(csvData, v => v.length, d => (d.nivel || 'N/A').toUpperCase().trim());
                    const labels = Array.from(levelCounts.keys());
                    const data = Array.from(levelCounts.values());

                    const ctx = document.getElementById('participantsChart').getContext('2d');
                    if (window.participantsChartInstance) window.participantsChartInstance.destroy();
                    window.participantsChartInstance = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: labels,
                            datasets: [{
                                label: 'N√∫mero de Participantes',
                                data: data,
                                backgroundColor: 'rgba(13, 148, 136, 0.6)',
                                borderColor: 'rgba(13, 148, 136, 1)',
                                borderWidth: 1
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    title: {
                                        display: true,
                                        text: 'Cantidad de Participantes'
                                    }
                                },
                                x: {
                                    title: {
                                        display: true,
                                        text: 'Nivel Educativo'
                                    }
                                }
                            },
                            plugins: {
                                legend: {
                                    display: false
                                },
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            return ` ${context.dataset.label}: ${context.formattedValue}`;
                                        }
                                    }
                                }
                            }
                        }
                    });
                } catch (error) {
                    console.error("Error loading CSV data for participants chart:", error);
                    const chartContainer = document.getElementById('participantsChart').parentElement;
                    chartContainer.innerHTML = '<div class="text-center text-red-500 font-semibold p-4">Error al cargar datos del CSV.</div>';
                }
            }

            // Nuevo gr√°fico de estatus de participantes
            function drawStatusChart(csvData) {
                let activos = 0;
                let inactivos = 0;
                const hoy = new Date();

                csvData.forEach(d => {
                    if (d.fecha_termino) {
                        const fechaTermino = new Date(d.fecha_termino);
                        if (fechaTermino > hoy) {
                            activos++;
                        } else {
                            inactivos++;
                        }
                    } else {
                        // Si no hay fecha de t√©rmino, se asume activo
                        activos++;
                    }
                });

                const data = {
                    labels: ['Activos', 'Inactivos'],
                    datasets: [{
                        label: 'N√∫mero de Participantes',
                        data: [activos, inactivos],
                        backgroundColor: [
                            'rgba(16, 185, 129, 0.8)', // Verde para activos
                            'rgba(239, 68, 68, 0.8)'  // Rojo para inactivos
                        ],
                        borderColor: [
                            'rgba(16, 185, 129, 1)',
                            'rgba(239, 68, 68, 1)'
                        ],
                        borderWidth: 1
                    }]
                };

                const ctx = document.getElementById('statusChart').getContext('2d');
                if (window.statusChartInstance) window.statusChartInstance.destroy();
                window.statusChartInstance = new Chart(ctx, {
                    type: 'bar',
                    data: data,
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Cantidad de Participantes'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            title: {
                                display: true,
                                text: 'Estatus Actual de los Participantes',
                                font: {
                                    size: 16
                                }
                            }
                        }
                    }
                });
            }

            // Gr√°fico de barras de edad (modificado para usar CSV)
            function drawAgeChart(csvData) {
                const ageCounts = {
                    '15-19': 0,
                    '20-24': 0,
                    '25-29': 0,
                    '30+': 0,
                    'N/A': 0
                };
                csvData.forEach(d => {
                    const age = parseInt(d.edad, 10);
                    if (!isNaN(age)) {
                        if (age >= 15 && age <= 19) ageCounts['15-19']++;
                        else if (age >= 20 && age <= 24) ageCounts['20-24']++;
                        else if (age >= 25 && age <= 29) ageCounts['25-29']++;
                        else ageCounts['30+']++;
                    } else {
                        ageCounts['N/A']++;
                    }
                });

                const ctx = document.getElementById('ageChart').getContext('2d');
                if (window.ageChartInstance) window.ageChartInstance.destroy();
                window.ageChartInstance = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: Object.keys(ageCounts),
                        datasets: [{
                            label: 'N√∫mero de Participantes',
                            data: Object.values(ageCounts),
                            backgroundColor: 'rgba(13, 148, 136, 0.8)',
                            borderColor: 'rgba(13, 148, 136, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Cantidad de Participantes'
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: 'Rango de Edad'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            }
                        }
                    }
                });
            }

            // Gr√°fico de pastel de g√©nero (modificado para usar CSV)
            function drawSexChart(csvData) {
                const sexCounts = d3.rollup(csvData, v => v.length, d => d.sexo ? d.sexo.toUpperCase().trim() : 'N/A');
                const labels = Array.from(sexCounts.keys());
                const data = Array.from(sexCounts.values());

                const ctx = document.getElementById('sexChart').getContext('2d');
                if (window.sexChartInstance) window.sexChartInstance.destroy();
                window.sexChartInstance = new Chart(ctx, {
                    type: 'pie',
                    data: {
                        labels: labels.map(l => {
                            if (l === 'M') return 'Mujeres';
                            if (l === 'H') return 'Hombres';
                            return l;
                        }),
                        datasets: [{
                            label: 'Distribuci√≥n por Sexo',
                            data: data,
                            backgroundColor: [
                                'rgba(59, 130, 246, 0.8)',
                                'rgba(236, 72, 153, 0.8)',
                                'rgba(107, 114, 128, 0.8)'
                            ],
                            borderColor: '#fff',
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        label += context.parsed;
                                        return label;
                                    }
                                }
                            }
                        }
                    }
                });
            }
        });
    </script>
</body>
</html>